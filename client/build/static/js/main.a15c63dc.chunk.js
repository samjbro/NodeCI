(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{118:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"fetchUser",function(){return k}),n.d(a,"fetchBlogs",function(){return N}),n.d(a,"fetchBlog",function(){return x}),n.d(a,"submitBlog",function(){return B});n(86);var r=n(0),c=n.n(r),l=n(78),o=n.n(l),i=n(6),u=n(10),s=n(81),m=n(12),p=n(13),b=n(16),f=n(14),h=n(17),d=n(124),v=n(125),g=n(120),E=n(26),y=n.n(E),O=n(49),j=n(50),w=n.n(j),k=function(){return function(){var e=Object(O.a)(y.a.mark(function e(t){var n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("/api/current_user");case 2:n=e.sent,t({type:"fetch_user",payload:n.data});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},N=function(){return function(){var e=Object(O.a)(y.a.mark(function e(t){var n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("/api/blogs");case 2:n=e.sent,t({type:"fetch_blogs",payload:n.data});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},x=function(e){return function(){var t=Object(O.a)(y.a.mark(function t(n){var a;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.a.get("/api/blogs/".concat(e));case 2:a=t.sent,n({type:"fetch_blog",payload:a.data});case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},B=function(e,t){return function(){var n=Object(O.a)(y.a.mark(function n(a){var r;return y.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w.a.post("/api/blogs",e);case 2:r=n.sent,t.push("/blogs"),a({type:"fetch_blog",payload:r.data});case 5:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()},C=n(119),_=function(e){function t(){return Object(m.a)(this,t),Object(b.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(p.a)(t,[{key:"renderContent",value:function(){switch(this.props.auth){case null:return c.a.createElement("span",null,"Null");case!1:return c.a.createElement("li",null,c.a.createElement("a",{href:"/auth/google"},"Login with Google"));default:return[c.a.createElement("li",{key:"3",style:{margin:"0 10px"}},c.a.createElement(C.a,{to:"/blogs"},"My Blogs")),c.a.createElement("li",{key:"2"},c.a.createElement("a",{href:"/auth/logout"},"Logout"))]}}},{key:"render",value:function(){return c.a.createElement("nav",{className:"indigo"},c.a.createElement("div",{className:"nav-wrapper"},c.a.createElement(C.a,{to:"/",className:"left brand-logo",style:{marginLeft:"10px"}},"Blogster"),c.a.createElement("ul",{className:"right"},this.renderContent())))}}]),t}(r.Component);var F=Object(u.b)(function(e){return{auth:e.auth}})(_),S=function(){return c.a.createElement("div",{style:{textAlign:"center"}},c.a.createElement("h1",null,"Blogster!"),"Write private blogs")},R=n(24),D=function(e){function t(){return Object(m.a)(this,t),Object(b.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchBlogs()}},{key:"renderBlogs",value:function(){return Object.keys(this.props.blogs).length?Object(R.map)(this.props.blogs,function(e){return c.a.createElement("div",{className:"card darken-1 horizontal",key:e._id},c.a.createElement("div",{className:"card-stacked"},c.a.createElement("div",{className:"card-content"},c.a.createElement("span",{className:"card-title"},e.title),c.a.createElement("p",null,e.content)),c.a.createElement("div",{className:"card-action"},c.a.createElement(C.a,{to:"/blogs/".concat(e._id)},"Read"))))}):c.a.createElement("div",null,"No Blogs Yet")}},{key:"render",value:function(){return c.a.createElement("div",null,this.renderBlogs())}}]),t}(r.Component);var M=Object(u.b)(function(e){return{blogs:e.blogs}},a)(D),L=function(){return c.a.createElement("div",null,c.a.createElement(M,null),c.a.createElement("div",{className:"fixed-action-btn"},c.a.createElement(C.a,{to:"/blogs/new",className:"btn-floating btn-large red"},c.a.createElement("i",{className:"material-icons"},"add"))))},U=n(121),V=n(122),A=[{label:"Blog Title",name:"title"},{label:"Content",name:"content"}],J=function(e){var t=e.input,n=e.label,a=e.meta,r=a.error,l=a.touched;return c.a.createElement("div",{className:t.name},c.a.createElement("label",null,n),c.a.createElement("input",Object.assign({},t,{style:{marginBottom:"20px"}})),c.a.createElement("div",{className:"red-text",style:{marginBototm:"20px"}},l&&r))},Y=function(e){function t(){return Object(m.a)(this,t),Object(b.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(p.a)(t,[{key:"renderFields",value:function(){return Object(R.map)(A,function(e){var t=e.label,n=e.name;return c.a.createElement(V.a,{key:n,component:J,type:"text",label:t,name:n})})}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("form",{onSubmit:this.props.handleSubmit(this.props.onBlogSubmit)},this.renderFields(),c.a.createElement(C.a,{to:"/blogs",className:"red btn-flat white-text"},"Cancel"),c.a.createElement("button",{type:"submit",className:"teal btn-flat right white-text"},"Next",c.a.createElement("i",{className:"material-icons right"},"done"))))}}]),t}(r.Component);var q=Object(U.a)({form:"blogForm",validate:function(e){var t={};return Object(R.each)(A,function(n){var a=n.name;e[a]||(t[a]="You must provide a value")}),t},destroyOnUnmount:!1})(Y),z=n(126),G=function(e){function t(){return Object(m.a)(this,t),Object(b.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(p.a)(t,[{key:"renderFields",value:function(){var e=this.props.formValues;return Object(R.map)(A,function(t){var n=t.name,a=t.label;return c.a.createElement("div",{key:n},c.a.createElement("label",null,a),c.a.createElement("div",null,e[n]))})}},{key:"renderButtons",value:function(){var e=this.props.onCancel;return c.a.createElement("div",null,c.a.createElement("button",{className:"yellow darken-3 white-text btn-flat",onClick:e},"Back"),c.a.createElement("button",{className:"green btn-flat right white-text"},"Save Blog",c.a.createElement("i",{className:"material-icons right"},"email")))}},{key:"onSubmit",value:function(e){e.preventDefault();var t=this.props;(0,t.submitBlog)(t.formValues,t.history)}},{key:"render",value:function(){return c.a.createElement("form",{onSubmit:this.onSubmit.bind(this)},c.a.createElement("h5",null,"Please confirm your entries"),this.renderFields(),this.renderButtons())}}]),t}(r.Component);var K=Object(u.b)(function(e){return{formValues:e.form.blogForm.values}},a)(Object(z.a)(G)),P=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(b.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={showFormReview:!1},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"renderContent",value:function(){var e=this;return this.state.showFormReview?c.a.createElement(K,{onCancel:function(){return e.setState({showFormReview:!1})}}):c.a.createElement(q,{onBlogSubmit:function(){return e.setState({showFormReview:!0})}})}},{key:"render",value:function(){return c.a.createElement("div",null,this.renderContent())}}]),t}(r.Component),T=Object(U.a)({form:"blogForm"})(P),W=function(e){function t(){return Object(m.a)(this,t),Object(b.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchBlog(this.props.match.params._id)}},{key:"render",value:function(){if(!this.props.blog)return"Blog not found";var e=this.props.blog,t=e.title,n=e.content;return c.a.createElement("div",null,c.a.createElement("h3",null,t),c.a.createElement("p",null,n))}}]),t}(r.Component);var H=Object(u.b)(function(e,t){return{blog:e.blogs[t.match.params._id]}},{fetchBlog:x})(W),I=function(e){function t(){return Object(m.a)(this,t),Object(b.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchUser()}},{key:"render",value:function(){return c.a.createElement("div",{className:"container"},c.a.createElement(d.a,null,c.a.createElement("div",null,c.a.createElement(F,null),c.a.createElement(v.a,null,c.a.createElement(g.a,{path:"/blogs/new",component:T}),c.a.createElement(g.a,{exact:!0,path:"/blogs/:_id",component:H}),c.a.createElement(g.a,{path:"/blogs",component:L}),c.a.createElement(g.a,{path:"/",component:S})))))}}]),t}(r.Component),Q=Object(u.b)(null,a)(I),X=n(123),Z=n(60),$=n(70),ee=Object(i.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"fetch_user":return t.payload||!1;default:return e}},form:X.a,blogs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"fetch_blog":var n=t.payload;return Object($.a)({},e,Object(Z.a)({},n._id,n));case"fetch_blogs":return Object($.a)({},e,Object(R.mapKeys)(t.payload,"_id"));default:return e}}}),te=Object(i.d)(ee,{},Object(i.a)(s.a));o.a.render(c.a.createElement(u.a,{store:te},c.a.createElement(Q,null)),document.querySelector("#root"))},85:function(e,t,n){e.exports=n(118)}},[[85,2,1]]]);
//# sourceMappingURL=main.a15c63dc.chunk.js.map